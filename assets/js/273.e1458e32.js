(window.webpackJsonp=window.webpackJsonp||[]).push([[273],{860:function(n,e,t){"use strict";t.r(e);var r=t(25),s=Object(r.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"_262-行程和用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_262-行程和用户"}},[n._v("#")]),n._v(" "),t("a",{attrs:{href:"https://leetcode-cn.com/problems/trips-and-users",target:"_blank",rel:"nofollow noopener noreferrer"}},[n._v("262. 行程和用户"),t("OutboundLink")],1)]),n._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/doocs/leetcode/blob/main/solution/0200-0299/0262.Trips%20and%20Users/README_EN.md",target:"_blank",rel:"nofollow noopener noreferrer"}},[n._v("English Version"),t("OutboundLink")],1)]),n._v(" "),t("h2",{attrs:{id:"题目描述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#题目描述"}},[n._v("#")]),n._v(" 题目描述")]),n._v(" "),t("p",[n._v("表："),t("code",[n._v("Trips")])]),t("div",{staticClass:"original__bRMd"},[t("div",[t("pre",[n._v("+-------------+----------+\n| Column Name | Type     |\n+-------------+----------+\n| Id          | int      |\n| Client_Id   | int      |\n| Driver_Id   | int      |\n| City_Id     | int      |\n| Status      | enum     |\n| Request_at  | date     |"),t("br"),n._v("\n+-------------+----------+\nId 是这张表的主键。\n这张表中存所有出租车的行程信息。每段行程有唯一 Id ，其中 Client_Id 和 Driver_Id 是 Users 表中 Users_Id 的外键。\nStatus 是一个表示行程状态的枚举类型，枚举成员为(‘completed’, ‘cancelled_by_driver’, ‘cancelled_by_client’) 。\n")]),t("p"),n._v(" "),t("p"),n._v(" "),t("div",{staticClass:"original__bRMd"},[t("div",[t("p",[n._v("表："),t("code",[n._v("Users")])])])]),n._v(" "),t("pre",[n._v("+-------------+----------+\n| Column Name | Type     |\n+-------------+----------+\n| Users_Id    | int      |\n| Banned      | enum     |\n| Role        | enum     |\n+-------------+----------+\nUsers_Id 是这张表的主键。\n这张表中存所有用户，每个用户都有一个唯一的 Users_Id ，Role 是一个表示用户身份的枚举类型，枚举成员为 (‘client’, ‘driver’, ‘partner’) 。\nBanned 是一个表示用户是否被禁止的枚举类型，枚举成员为 (‘Yes’, ‘No’) 。\n")]),n._v(" "),t("p"),n._v(" "),t("p",[n._v("写一段 SQL 语句查出 "),t("code",[n._v('"2013-10-01"')]),t("strong"),n._v("至 "),t("code",[n._v('"2013-10-03"')]),t("strong"),n._v("期间非禁止用户（"),t("strong",[n._v("乘客和司机都必须未被禁止")]),n._v("）的取消率。非禁止用户即 Banned 为 No 的用户，禁止用户即 Banned 为 Yes 的用户。")]),n._v(" "),t("p",[t("strong",[n._v("取消率")]),n._v(" 的计算方式如下：(被司机或乘客取消的非禁止用户生成的订单数量) / (非禁止用户生成的订单总数)。")]),n._v(" "),t("p",[n._v("返回结果表中的数据可以按任意顺序组织。其中取消率 "),t("code",[n._v("Cancellation Rate")]),n._v(" 需要四舍五入保留 "),t("strong",[n._v("两位小数")]),n._v(" 。")]),n._v(" "),t("p"),n._v(" "),t("p",[n._v("查询结果格式如下例所示：")]),n._v(" "),t("pre",[n._v("Trips 表：\n+----+-----------+-----------+---------+---------------------+------------+\n| Id | Client_Id | Driver_Id | City_Id | Status              | Request_at |\n+----+-----------+-----------+---------+---------------------+------------+\n| 1  | 1         | 10        | 1       | completed           | 2013-10-01 |\n| 2  | 2         | 11        | 1       | cancelled_by_driver | 2013-10-01 |\n| 3  | 3         | 12        | 6       | completed           | 2013-10-01 |\n| 4  | 4         | 13        | 6       | cancelled_by_client | 2013-10-01 |\n| 5  | 1         | 10        | 1       | completed           | 2013-10-02 |\n| 6  | 2         | 11        | 6       | completed           | 2013-10-02 |\n| 7  | 3         | 12        | 6       | completed           | 2013-10-02 |\n| 8  | 2         | 12        | 12      | completed           | 2013-10-03 |\n| 9  | 3         | 10        | 12      | completed           | 2013-10-03 |\n| 10 | 4         | 13        | 12      | cancelled_by_driver | 2013-10-03 |\n+----+-----------+-----------+---------+---------------------+------------+\n\nUsers 表：\n+----------+--------+--------+\n| Users_Id | Banned | Role   |\n+----------+--------+--------+\n| 1        | No     | client |\n| 2        | Yes    | client |\n| 3        | No     | client |\n| 4        | No     | client |\n| 10       | No     | driver |\n| 11       | No     | driver |\n| 12       | No     | driver |\n| 13       | No     | driver |\n+----------+--------+--------+\n\nResult 表：\n+------------+-------------------+\n| Day        | Cancellation Rate |\n+------------+-------------------+\n| 2013-10-01 | 0.33              |\n| 2013-10-02 | 0.00              |\n| 2013-10-03 | 0.50              |\n+------------+-------------------+\n\n2013-10-01：\n  - 共有 4 条请求，其中 2 条取消。\n  - 然而，Id=2 的请求是由禁止用户（User_Id=2）发出的，所以计算时应当忽略它。\n  - 因此，总共有 3 条非禁止请求参与计算，其中 1 条取消。\n  - 取消率为 (1 / 3) = 0.33\n2013-10-02：\n  - 共有 3 条请求，其中 0 条取消。\n  - 然而，Id=6 的请求是由禁止用户发出的，所以计算时应当忽略它。\n  - 因此，总共有 2 条非禁止请求参与计算，其中 0 条取消。\n  - 取消率为 (0 / 2) = 0.00\n2013-10-03：\n  - 共有 3 条请求，其中 1 条取消。\n  - 然而，Id=8 的请求是由禁止用户发出的，所以计算时应当忽略它。\n  - 因此，总共有 2 条非禁止请求参与计算，其中 1 条取消。\n  - 取消率为 (1 / 2) = 0.50\n")])])]),n._v(" "),t("h2",{attrs:{id:"解法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解法"}},[n._v("#")]),n._v(" 解法")]),n._v(" "),t("h3",{attrs:{id:"sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql"}},[n._v("#")]),n._v(" "),t("strong",[n._v("SQL")])]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br")])])])}),[],!1,null,null,null);e.default=s.exports}}]);